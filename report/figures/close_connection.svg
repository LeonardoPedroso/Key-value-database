<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="694" height="656"><desc>frame%20close_connection%0A%0Aparticipantgroup%20%23lightgray%20**Application**%20%0Aparticipant%20ApplicationThread%0Aparticipant%20callbackServerThread%0Aend%0A%0Aparticipantgroup%20%23lightgray%20**KVS-LocalServer**%20%0Aparticipant%20KVSLocalServerClientThread%0Aend%0A%0Aactivate%20ApplicationThread%0A%0Aparallel%0Anote%20over%20KVSLocalServerClientThread%3A%22%22rcvQueryKVSLocalServer()%22%22%0Aparallel%20off%0A%0AApplicationThread-%3EKVSLocalServerClientThread%3A%20%22%22queryCloseConnection()%22%22%0Adeactivate%20ApplicationThread%0Aactivate%20KVSLocalServerClientThread%0A%0Anote%20over%20KVSLocalServerClientThread%3A%20Remove%20authetication%20and%5Cn%20%20save%20disconnection%20time%0A%0AKVSLocalServerClientThread--%3EApplicationThread%3A%20%22%22ansQueryCloseConnection(status)%22%22%0Aactivate%20ApplicationThread%0A%0AKVSLocalServerClientThread--%3EcallbackServerThread%3A%20%22%22close(callback_socket)%22%22%0A%0Adestroyafter%20callbackServerThread%0A%0Anote%20over%20KVSLocalServerClientThread%3A%20Remove%20callbacks%20of%20the%5Cndisconnecting%20%20application%5Cn%20from%20the%20callback%20list%0A%0Anote%20over%20KVSLocalServerClientThread%3A%20%22%22close(client_socket)%22%22%0A%0Adestroyafter%20KVSLocalServerClientThread%0Adeactivate%20KVSLocalServerClientThread%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="694" height="656"/></g><g><g><path fill="lightgray" stroke="black" paint-order="fill stroke markers" d=" M 29.026399710000007 49.55221093349999 L 330.103795144 49.55221093349999 L 330.103795144 627.1084546870001 L 29.026399710000007 627.1084546870001 L 29.026399710000007 49.55221093349999" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="bold" text-decoration="normal" x="145.2320896145" y="68.90314407349999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Application</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="210.5641208645" y="68.90314407349999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> </text></g><g><path fill="lightgray" stroke="black" paint-order="fill stroke markers" d=" M 445.12110092716665 49.55221093349999 L 645.6812830191667 49.55221093349999 L 645.6812830191667 627.1084546870001 L 445.12110092716665 627.1084546870001 L 445.12110092716665 49.55221093349999" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="bold" text-decoration="normal" x="495.04572322316665" y="68.90314407349999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">KVS-LocalServer</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="592.4226763481666" y="68.90314407349999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> </text></g></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 99.2977016935 119.83756451699999 L 99.2977016935 627.1084546870001" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray="10.632380846153845,4.607365033333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 249.8363994105 119.83756451699999 L 249.8363994105 394.897257007" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray="10.632380846153845,4.607365033333333"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 545.4011919731666 119.83756451699999 L 545.4011919731666 573.202283797" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray="10.632380846153845,4.607365033333333"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 35.937447260000006 82.517907747 L 162.657956127 82.517907747 L 162.657956127 119.83756451699999 L 35.937447260000006 119.83756451699999 L 35.937447260000006 82.517907747 Z" stroke-miterlimit="10" stroke-width="2.211535216" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="50.9344204435" y="106.015469417" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ApplicationThread</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 176.480051227 82.517907747 L 323.192747594 82.517907747 L 323.192747594 119.83756451699999 L 176.480051227 119.83756451699999 L 176.480051227 82.517907747 Z" stroke-miterlimit="10" stroke-width="2.211535216" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="191.4770244105" y="106.015469417" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">callbackServerThread</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 452.03214847716663 82.517907747 L 638.7702354691667 82.517907747 L 638.7702354691667 119.83756451699999 L 452.03214847716663 119.83756451699999 L 452.03214847716663 82.517907747 Z" stroke-miterlimit="10" stroke-width="2.211535216" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="467.02912166066665" y="106.015469417" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">KVSLocalServerClientThread</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 92.3866541435 126.748612067 L 106.20874924350001 126.748612067 L 106.20874924350001 217.974439727 L 92.3866541435 217.974439727 L 92.3866541435 126.748612067" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 538.4901444231666 217.974439727 L 552.3122395231667 217.974439727 L 552.3122395231667 585.642169387 L 538.4901444231666 585.642169387 L 538.4901444231666 217.974439727" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 92.3866541435 323.022362487 L 106.20874924350001 323.022362487 L 106.20874924350001 620.197407137 L 92.3866541435 620.197407137 L 92.3866541435 323.022362487" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/><g><g/><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 6.91104755 6.91104755 L 687.1036348731668 6.91104755 L 687.1036348731668 649.2238068470001 L 6.91104755 649.2238068470001 L 6.91104755 6.91104755 Z" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 6.91104755 6.91104755 L 6.91104755 26.261980689999998 L 144.623597125 26.261980689999998 L 154.299063695 16.58651412 L 154.299063695 6.91104755 L 6.91104755 6.91104755" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="bold" text-decoration="normal" x="20.73314265" y="20.042037894999996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sd</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="38.071033275000005" y="20.042037894999996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">close_connection</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 439.6361963331666 147.481754717 L 638.7263020231666 147.481754717 L 651.1661876131666 159.921640307 L 651.1661876131666 179.272573447 L 439.6361963331666 179.272573447 L 439.6361963331666 147.481754717 M 638.7263020231666 147.481754717 L 638.7263020231666 159.921640307 L 651.1661876131666 159.921640307" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="monospace" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="458.98712947316665" y="166.83268785700002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">rcvQueryKVSLocalServer()</text></g><g><text fill="black" stroke="none" font-family="monospace" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="243.13655620833333" y="212.44560168700002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">queryCloseConnection()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 106.20874924350001 217.974439727 L 527.1099527908333 217.974439727" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/><g transform="translate(538.4901444231666,217.974439727) translate(-538.4901444231666,-217.974439727)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 526.9717318398333 212.21523343533335 L 538.4901444231666 217.974439727 L 526.9717318398333 223.73364601866666 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 456.3383447706666 238.70758237700002 L 622.0241535856666 238.70758237700002 L 634.4640391756666 251.147467967 L 634.4640391756666 284.320496207 L 456.3383447706666 284.320496207 L 456.3383447706666 238.70758237700002 M 622.0241535856666 238.70758237700002 L 622.0241535856666 251.147467967 L 634.4640391756666 251.147467967" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="475.68927791066665" y="258.058515517" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Remove authetication and</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="475.68927791066665" y="271.880610617" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">  save disconnection time</text></g><g><text fill="black" stroke="none" font-family="monospace" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="210.73128277083333" y="317.493524447" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ansQueryCloseConnection(status)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 538.4901444231666 323.022362487 L 117.58894087583334 323.022362487" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray="5.52883804"/><g transform="translate(106.20874924350001,323.022362487) translate(-106.20874924350001,-323.022362487)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 117.72716182683334 317.26315619533335 L 106.20874924350001 323.022362487 L 117.72716182683334 328.78156877866667 Z"/></g></g><g><text fill="black" stroke="none" font-family="monospace" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="314.9503812918333" y="356.195390727" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">close(callback_socket)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 538.4901444231666 361.724228767 L 261.21659104283333 361.724228767" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray="5.52883804"/><g transform="translate(249.8363994105,361.724228767) translate(-249.8363994105,-361.724228767)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 261.3548119938333 355.96502247533334 L 249.8363994105 361.724228767 L 261.3548119938333 367.48343505866666 Z"/></g></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 237.39651382050002 382.457371417 L 262.2762850005 407.337142597 M 262.2762850005 382.457371417 L 237.39651382050002 407.337142597" stroke-miterlimit="10" stroke-width="2.211535216" stroke-dasharray=""/></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 457.3373682081666 428.070285247 L 621.0251301481666 428.070285247 L 633.4650157381666 440.51017083700003 L 633.4650157381666 487.505294177 L 457.3373682081666 487.505294177 L 457.3373682081666 428.070285247 M 621.0251301481666 428.070285247 L 621.0251301481666 440.51017083700003 L 633.4650157381666 440.51017083700003" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="476.68830134816665" y="447.421218387" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Remove callbacks of the</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="476.68830134816665" y="461.243313487" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">disconnecting  application</text><text fill="black" stroke="none" font-family="sans-serif" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="476.68830134816665" y="475.06540858700004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> from the callback list</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 454.0385400831666 508.23843682699993 L 624.3239582731666 508.23843682699993 L 636.7638438631666 520.6783224169999 L 636.7638438631666 540.0292555569999 L 454.0385400831666 540.0292555569999 L 454.0385400831666 508.23843682699993 M 624.3239582731666 508.23843682699993 L 624.3239582731666 520.6783224169999 L 636.7638438631666 520.6783224169999" stroke-miterlimit="10" stroke-width="1.1518412583333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="monospace" font-size="9pt" font-style="normal" font-weight="normal" text-decoration="normal" x="473.38947322316665" y="527.5893699669998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">close(client_socket)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 532.9613063831666 560.7623982069999 L 557.8410775631667 585.642169387 M 557.8410775631667 560.7623982069999 L 532.9613063831666 585.642169387" stroke-miterlimit="10" stroke-width="2.211535216" stroke-dasharray=""/></g></g><g/><g/><g/></g></svg>