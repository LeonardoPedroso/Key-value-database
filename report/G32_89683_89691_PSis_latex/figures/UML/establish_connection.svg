<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="822" height="639"><desc>frame%20establish_connection%0A%0Aparticipantgroup%20%23lightgray%20**Application**%20%0Aparticipant%20ApplicationThread%0Aparticipant%20callbackServerThread%0Aend%0A%0A%0A%0Aparticipantgroup%20%23lightgray%20**KVS-LocalServer**%20%0Aparticipant%20ServerThread%0Aparticipant%20KVSLocalServerClientThread%0Aend%0Aparticipant%20KVS-AuthServer%0A%0Aactivate%20ApplicationThread%0A%0Aparallel%0Anote%20over%20ServerThread%3A%22%22accept()%22%22%0Anote%20over%20KVS-AuthServer%20%3A%22%22recvfrom()%22%22%0Aparallel%20off%0A%0AApplicationThread-%3EServerThread%3A%20%20%22%22connect()%22%22%0A%0Aactivate%20ServerThread%0A%0Aparallel%0AServerThread--%3E*KVSLocalServerClientThread%3A%3C%3Cnew%20thread%3E%3E%0Anote%20over%20ApplicationThread%3ASetup%20callback%20socket%0Aparallel%20off%0A%0Adeactivate%20ServerThread%0A%0Aparallel%0Anote%20over%20KVSLocalServerClientThread%3A%22%22rcvQueryKVSLocalServer()%22%22%0Anote%20over%20ServerThread%3A%22%22accept()%22%22%0A%0Aparallel%20off%0A%0A%0AApplicationThread-%3EKVSLocalServerClientThread%3A%20%22%22queryEstablishConnection(PID%2CgroupId%2Csecret)%0Adeactivate%20ApplicationThread%0Aactivate%20KVSLocalServerClientThread%0A%0Anote%20over%20KVSLocalServerClientThread%3A%20Check%20if%20%22%22groupId%22%22%20exists%0A%0AKVSLocalServerClientThread-%3EKVS-AuthServer%3A%20%22%22getSecret(groupId)%22%22%0Aactivate%20KVS-AuthServer%0A%0Aparallel%0Anote%20over%20KVS-AuthServer%3ACheck%20if%20%22%22groupId%22%22%20exists%2C%5Cn%20and%20if%20so%20retrieve%20%22%22secret%22%22%0A%0Anote%20over%20KVSLocalServerClientThread%3A%20Wait%20for%20reply%20and%2C%20if%20it%20does%20not%20%5Cn%20recieve%20one%20in%200.5s%2C%20query%20again%2C%5Cn%20up%20to%205%20times%0A%0Aparallel%20off%0A%0AKVS-AuthServer--%3EKVSLocalServerClientThread%3A%20%22%22send(secret)%22%22%0A%0AKVSLocalServerClientThread-%3EApplicationThread%3A%20%22%22connectCallback()%22%22%0AKVSLocalServerClientThread--%3EApplicationThread%3A%20%22%22ansQueryEstablishConnection(status)%22%22%0A%0Adeactivate%20KVSLocalServerClientThread%0Aactivate%20ApplicationThread%0A%0Anote%20over%20ApplicationThread%3A%20%22%22acceptCallback()%22%22%0AApplicationThread--%3E*callbackServerThread%3A%3C%3Cnew%20thread%3E%3E%0Adeactivate%20ApplicationThread%0A%0Anote%20over%20callbackServerThread%3A%20%22%22read()%22%22%0A%0A%0A%0Adeactivate%20KVS-AuthServer</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="822" height="639"/></g><g><g><path fill="lightgray" stroke="black" paint-order="fill stroke markers" d=" M 31.793463285730464 36.03797158799999 L 302.7068935332917 36.03797158799999 L 302.7068935332917 618.325141528 L 31.793463285730464 618.325141528 L 31.793463285730464 36.03797158799999" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="bold" text-decoration="normal" x="140.55632312386655" y="50.11137750799999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Application</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="191.3518706092181" y="50.11137750799999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> </text></g><g><path fill="lightgray" stroke="black" paint-order="fill stroke markers" d=" M 312.75932633329165 36.03797158799999 L 610.7369444774349 36.03797158799999 L 610.7369444774349 618.325141528 L 312.75932633329165 618.325141528 L 312.75932633329165 36.03797158799999" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="bold" text-decoration="normal" x="422.5968445118086" y="50.11137750799999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">KVS-LocalServer</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="498.3072632129805" y="50.11137750799999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> </text></g></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 85.32891760136718 87.154592376 L 85.32891760136718 618.325141528" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray="7.732640615384615,3.3508109333333334"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 241.39948944958854 549.968598488 L 241.39948944958854 618.325141528" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray="7.732640615384615,3.3508109333333334"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 357.2130927216823 87.154592376 L 357.2130927216823 618.325141528" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray="7.732640615384615,3.3508109333333334"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 533.8697106818178 202.45599659200002 L 533.8697106818178 618.325141528" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray="7.732640615384615,3.3508109333333334"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 729.8774773542578 87.154592376 L 729.8774773542578 618.325141528" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray="7.732640615384615,3.3508109333333334"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 36.81967968573046 60.013023816 L 133.83815551700388 60.013023816 L 133.83815551700388 87.154592376 L 36.81967968573046 87.154592376 L 36.81967968573046 60.013023816 Z" stroke-miterlimit="10" stroke-width="1.608389248" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="47.72656927373046" y="77.10215957599999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ApplicationThread</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 317.78554273329166 60.013023816 L 396.64064271007294 60.013023816 L 396.64064271007294 87.154592376 L 317.78554273329166 87.154592376 L 317.78554273329166 60.013023816 Z" stroke-miterlimit="10" stroke-width="1.608389248" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="328.6924323212917" y="77.10215957599999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ServerThread</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 684.746253049461 60.013023816 L 775.0087016590547 60.013023816 L 775.0087016590547 87.154592376 L 684.746253049461 87.154592376 L 684.746253049461 60.013023816 Z" stroke-miterlimit="10" stroke-width="1.608389248" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="695.653142637461" y="77.10215957599999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">KVS-AuthServer</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 80.30270120136719 92.180808776 L 90.35513400136718 92.180808776 L 90.35513400136718 268.80205307200004 L 80.30270120136719 268.80205307200004 L 80.30270120136719 92.180808776" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 352.1868763216823 158.526865256 L 362.2393091216823 158.526865256 L 362.2393091216823 202.45599659200002 L 352.1868763216823 202.45599659200002 L 352.1868763216823 158.526865256" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 528.8434942818178 268.80205307200004 L 538.8959270818177 268.80205307200004 L 538.8959270818177 467.840222512 L 528.8434942818178 467.840222512 L 528.8434942818178 268.80205307200004" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 724.8512609542579 335.14810955200005 L 734.9036937542578 335.14810955200005 L 734.9036937542578 588.167843128 L 724.8512609542579 588.167843128 L 724.8512609542579 335.14810955200005" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 80.30270120136719 467.840222512 L 90.35513400136718 467.840222512 L 90.35513400136718 535.54335742 L 80.30270120136719 535.54335742 L 80.30270120136719 467.840222512" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g><g/><g/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 5.0262164 5.0262164 L 817.5284375277929 5.0262164 L 817.5284375277929 634.4090340079999 L 5.0262164 634.4090340079999 L 5.0262164 5.0262164 Z" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 5.0262164 5.0262164 L 5.0262164 19.099622319999998 L 125.75177902148437 19.099622319999998 L 132.78848198148438 12.062919359999999 L 132.78848198148438 5.0262164 L 5.0262164 5.0262164" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="bold" text-decoration="normal" x="15.078649200000001" y="14.576027559999998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sd</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="28.558828033007813" y="14.576027559999998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">establish_connection</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 322.62101004386983 107.25945797600001 L 382.7579858794948 107.25945797600001 L 391.80517539949483 116.30664749600001 L 391.80517539949483 130.380053416 L 322.62101004386983 130.380053416 L 322.62101004386983 107.25945797600001 M 382.7579858794948 107.25945797600001 L 382.7579858794948 116.30664749600001 L 391.80517539949483 116.30664749600001" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="336.6944159638698" y="121.33286389600002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">accept()</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 690.1557254869922 107.25945797600001 L 760.5520397015235 107.25945797600001 L 769.5992292215235 116.30664749600001 L 769.5992292215235 130.380053416 L 690.1557254869922 130.380053416 L 690.1557254869922 107.25945797600001 M 760.5520397015235 107.25945797600001 L 760.5520397015235 116.30664749600001 L 769.5992292215235 116.30664749600001" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="704.2291314069922" y="121.33286389600002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">recvfrom()</text></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="196.8914122660169" y="154.505892136" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> </text><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="199.4835753519544" y="154.505892136" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connect()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 90.35513400136718 158.526865256 L 343.91037331634897 158.526865256" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g transform="translate(352.1868763216823,158.526865256) translate(-352.1868763216823,-158.526865256)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 343.80984898834896 154.33835158933334 L 352.1868763216823 158.526865256 L 343.80984898834896 162.71537892266667 Z"/></g></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 462.02869328620056 174.459971244 L 605.710728077435 174.459971244 L 605.710728077435 201.601539804 L 462.02869328620056 201.601539804 L 462.02869328620056 174.459971244 Z" stroke-miterlimit="10" stroke-width="1.608389248" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="472.9355828742006" y="191.54910700400004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">KVSLocalServerClientThread</text></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="378.1556610550157" y="184.00978240400002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">&lt;&lt;new thread&gt;&gt;</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 362.2393091216823 188.03075552400003 L 453.75219028086724 188.03075552400003" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray="4.02097312"/><g transform="translate(462.02869328620056,188.03075552400003) translate(-462.02869328620056,-188.03075552400003)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 453.65166595286723 183.84224185733336 L 462.02869328620056 188.03075552400003 L 453.65166595286723 192.2192691906667 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 26.136325279999998 179.33540115200003 L 135.47432040273438 179.33540115200003 L 144.52150992273437 188.38259067200002 L 144.52150992273437 202.45599659200002 L 26.136325279999998 202.45599659200002 L 26.136325279999998 179.33540115200003 M 135.47432040273438 179.33540115200003 L 135.47432040273438 188.38259067200002 L 144.52150992273437 188.38259067200002" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="40.20973119999999" y="193.408807072" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Setup callback socket</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 458.2402744883803 217.53464579200005 L 600.4519573552553 217.53464579200005 L 609.4991468752553 226.58183531200004 L 609.4991468752553 240.65524123200004 L 458.2402744883803 240.65524123200004 L 458.2402744883803 217.53464579200005 M 600.4519573552553 217.53464579200005 L 600.4519573552553 226.58183531200004 L 609.4991468752553 226.58183531200004" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="472.31368040838026" y="231.60805171200002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">rcvQueryKVSLocalServer()</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 322.62101004386983 217.53464579200005 L 382.7579858794948 217.53464579200005 L 391.80517539949483 226.58183531200004 L 391.80517539949483 240.65524123200004 L 322.62101004386983 240.65524123200004 L 322.62101004386983 217.53464579200005 M 382.7579858794948 217.53464579200005 L 382.7579858794948 226.58183531200004 L 391.80517539949483 226.58183531200004" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="336.6944159638698" y="231.60805171200002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">accept()</text></g><g><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="196.74659197362377" y="264.781079952" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">queryEstablishConnection(PID,groupId,secret)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 90.35513400136718 268.80205307200004 L 520.5669912764845 268.80205307200004" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g transform="translate(528.8434942818178,268.80205307200004) translate(-528.8434942818178,-268.80205307200004)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 520.4664669484845 264.61353940533337 L 528.8434942818178 268.80205307200004 L 520.4664669484845 272.9905667386667 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 470.47451215927873 283.88070227200006 L 588.2177196843569 283.88070227200006 L 597.2649092043569 292.9278917920001 L 597.2649092043569 307.00129771200005 L 470.47451215927873 307.00129771200005 L 470.47451215927873 283.88070227200006 M 588.2177196843569 283.88070227200006 L 588.2177196843569 292.9278917920001 L 597.2649092043569 292.9278917920001" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="484.5479180792787" y="297.9541081920001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Check if </text><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="520.8428094367006" y="297.9541081920001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">groupId</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="556.7504937628725" y="297.9541081920001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> exists</text></g><g><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="585.7065713129597" y="331.12713643200004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">getSecret(groupId)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 538.8959270818177 335.14810955200005 L 716.5747579489246 335.14810955200005" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g transform="translate(724.8512609542579,335.14810955200005) translate(-724.8512609542579,-335.14810955200005)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 716.4742336209246 330.9595958853334 L 724.8512609542579 335.14810955200005 L 716.4742336209246 339.3366232186667 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 663.3366260607227 350.226758752 L 787.3711391277931 350.226758752 L 796.418328647793 359.27394827200004 L 796.418328647793 383.39978699200003 L 663.3366260607227 383.39978699200003 L 663.3366260607227 350.226758752 M 787.3711391277931 350.226758752 L 787.3711391277931 359.27394827200004 L 796.418328647793 359.27394827200004" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="677.4100319807227" y="364.30016467200005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Check if </text><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="713.7049233381446" y="364.30016467200005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">groupId</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="749.6126076643164" y="364.30016467200005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> exists,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="677.4100319807227" y="374.35259747200007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> and if so retrieve </text><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="751.5669075910743" y="374.35259747200007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">secret</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 451.0743046397475 340.174325952 L 607.6179272038881 340.174325952 L 616.6651167238881 349.221515472 L 616.6651167238881 383.39978699200003 L 451.0743046397475 383.39978699200003 L 451.0743046397475 340.174325952 M 607.6179272038881 340.174325952 L 607.6179272038881 349.221515472 L 616.6651167238881 349.221515472" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="465.14771055974745" y="354.24773187200003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Wait for reply and, if it does not </text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="465.14771055974745" y="364.30016467200005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> recieve one in 0.5s, query again,</text><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="465.14771055974745" y="374.35259747200007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> up to 5 times</text></g><g><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="601.095578881319" y="407.525625712" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">send(secret)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 724.8512609542579 411.54659883200003 L 547.172430087151 411.54659883200003" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray="4.02097312"/><g transform="translate(538.8959270818177,411.54659883200003) translate(-538.8959270818177,-411.54659883200003)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 547.272954415151 407.35808516533336 L 538.8959270818177 411.54659883200003 L 547.272954415151 415.7351124986667 Z"/></g></g><g><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="263.484017831241" y="435.672437552" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">connectCallback()</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 528.8434942818178 439.693410672 L 93.60542060670052 439.693410672" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g transform="translate(85.32891760136718,439.693410672) translate(-85.32891760136718,-439.693410672)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 93.70594493470051 435.50489700533336 L 85.32891760136718 439.693410672 L 93.70594493470051 443.8819243386667 Z"/></g></g><g><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="219.83010332616283" y="463.819249392" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ansQueryEstablishConnection(status)</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 528.8434942818178 467.840222512 L 98.63163700670052 467.840222512" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray="4.02097312"/><g transform="translate(90.35513400136718,467.840222512) translate(-90.35513400136718,-467.840222512)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 98.7321613347005 463.65170884533336 L 90.35513400136718 467.840222512 L 98.7321613347005 472.0287361786667 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 30.218158165742178 482.91887171200005 L 131.3924875169922 482.91887171200005 L 140.43967703699218 491.9660612320001 L 140.43967703699218 506.03946715200004 L 30.218158165742178 506.03946715200004 L 30.218158165742178 482.91887171200005 M 131.3924875169922 482.91887171200005 L 131.3924875169922 491.9660612320001 L 140.43967703699218 491.9660612320001" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="44.29156408574218" y="496.9922776320001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">acceptCallback()</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 185.1183017658854 521.97257314 L 297.6806771332916 521.97257314 L 297.6806771332916 549.1141417 L 185.1183017658854 549.1141417 L 185.1183017658854 521.97257314 Z" stroke-miterlimit="10" stroke-width="1.608389248" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="196.02519135388542" y="539.0617089000001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">callbackServerThread</text></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="103.7583777347005" y="531.5223843000001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">&lt;&lt;new thread&gt;&gt;</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 90.35513400136718 535.54335742 L 176.84179876055208 535.54335742" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray="4.02097312"/><g transform="translate(185.1183017658854,535.54335742) translate(-185.1183017658854,-535.54335742)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 176.74127443255207 531.3548437533333 L 185.1183017658854 535.54335742 L 176.74127443255207 539.7318710866667 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 211.93707596122917 565.047247688 L 261.8147134179479 565.047247688 L 270.86190293794795 574.0944372079999 L 270.86190293794795 588.167843128 L 211.93707596122917 588.167843128 L 211.93707596122917 565.047247688 M 261.8147134179479 565.047247688 L 261.8147134179479 574.0944372079999 L 270.86190293794795 574.0944372079999" stroke-miterlimit="10" stroke-width="0.8377027333333333" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="monospace" font-size="7pt" font-style="normal" font-weight="normal" text-decoration="normal" x="226.01048188122917" y="579.120653608" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">read()</text></g></g><g/><g/><g/></g></svg>